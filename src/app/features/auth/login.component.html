<div class="auth-shell">
  <div class="auth-decor" aria-hidden="true">
    <div class="orb orb--one"></div>
    <div class="orb orb--two"></div>
  </div>

  <section class="auth-card">
    <header class="auth-header">
      <p class="auth-eyebrow">Welcome back</p>
      <h1>{{ isLoggedIn() ? 'Welcome back!' : 'Log in to gitPlumbers' }}</h1>
      <p class="auth-blurb">
        @if (!isLoggedIn()) { Keep shipping high-velocity features with confidence. Access your
        control panel to check audits, review insights, and keep your pipeline humming. } @else {
        You're already logged in! Click below to access your dashboard. }
      </p>
    </header>

    <form [formGroup]="form" (ngSubmit)="onSubmit()" novalidate>
      @if (!isLoggedIn()) {
      <div
        class="form-field"
        [class.form-field--invalid]="form.controls.email.invalid && form.controls.email.touched"
      >
        <label for="login-email">Email address</label>
        <input
          id="login-email"
          type="email"
          autocomplete="email"
          formControlName="email"
          [attr.aria-invalid]="form.controls.email.invalid && form.controls.email.touched"
          placeholder="you@product.team"
        />
        @if (form.controls.email.invalid && form.controls.email.touched) {
        <p class="field-error">We need a valid email address.</p>
        }
      </div>

      <div
        class="form-field"
        [class.form-field--invalid]="
          form.controls.password.invalid && form.controls.password.touched
        "
      >
        <label for="login-password">Password</label>
        <input
          id="login-password"
          type="password"
          autocomplete="current-password"
          formControlName="password"
          minlength="6"
          [attr.aria-invalid]="form.controls.password.invalid && form.controls.password.touched"
          placeholder="Secure password"
        />
        @if (form.controls.password.invalid && form.controls.password.touched) {
        <p class="field-error">Password must be at least 6 characters.</p>
        }
      </div>

      <div class="auth-meta">
        <a routerLink="/forgot-password">Forgot password?</a>
      </div>
      }

      <button type="submit" class="primary-action" [disabled]="submitting()">
        <span>{{ buttonLabel() }}</span>
      </button>
    </form>

    @if (errorMessage(); as error) {
    <div class="auth-footer" aria-live="polite">
      <p class="auth-feedback" role="alert">{{ error }}</p>
    </div>
    } @if (!isLoggedIn()) {
    <footer class="auth-switcher">
      <span>No account yet?</span>
      <a routerLink="/signup" class="switcher-link">Create your account</a>
    </footer>
    }
  </section>
</div>
