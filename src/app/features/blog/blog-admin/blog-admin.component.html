<div class="blog-admin">
  <header class="blog-admin__header">
    <h1>Blog Administration</h1>
    <p>Manage generated blog posts and their publication status.</p>
    <button class="btn btn--secondary" (click)="fixMissingStatus()">
      Fix Missing Status Fields
    </button>
  </header>

  <section class="blog-admin__stats">
    <div class="stat-card">
      <h3>Total Posts</h3>
      <span class="stat-number">{{ allPosts().length }}</span>
    </div>
    <div class="stat-card">
      <h3>Published</h3>
      <span class="stat-number">{{ publishedPosts().length }}</span>
    </div>
    <div class="stat-card">
      <h3>Drafts</h3>
      <span class="stat-number">{{ draftPosts().length }}</span>
    </div>
  </section>

  @if (draftPosts().length) {
    <section class="blog-admin__drafts">
      <h2>Draft Posts</h2>
      <div class="post-list">
        @for (post of draftPosts(); track post.slug) {
          <article class="post-card post-card--draft">
            <header>
              <h3>{{ post.title }}</h3>
              <p class="post-meta">{{ post.categorySlug | titlecase }} &middot; {{ post.publishedOn | date: 'MMM d, y' }}</p>
            </header>
            <p class="post-summary">{{ post.summary }}</p>
            <footer class="post-actions">
              <button
                class="btn btn--primary"
                (click)="togglePostStatus(post)"
                [disabled]="false">
                Publish
              </button>
              <a [routerLink]="['/blog', post.slug]" class="btn btn--secondary" target="_blank">
                Preview
              </a>
            </footer>
          </article>
        }
      </div>
    </section>
  }

  @if (publishedPosts().length) {
    <section class="blog-admin__published">
      <h2>Published Posts</h2>
      <div class="post-list">
        @for (post of publishedPosts(); track post.slug) {
          <article class="post-card post-card--published">
            <header>
              <h3>{{ post.title }}</h3>
              <p class="post-meta">{{ post.categorySlug | titlecase }} &middot; {{ post.publishedOn | date: 'MMM d, y' }}</p>
            </header>
            <p class="post-summary">{{ post.summary }}</p>
            <footer class="post-actions">
              <button
                class="btn btn--warning"
                (click)="togglePostStatus(post)"
                [disabled]="false">
                Unpublish
              </button>
              <a [routerLink]="['/blog', post.slug]" class="btn btn--secondary" target="_blank">
                View
              </a>
            </footer>
          </article>
        }
      </div>
    </section>
  }

  @if (!allPosts().length) {
    <section class="blog-admin__empty">
      <p>No blog posts found. The blog generator will create posts automatically.</p>
    </section>
  }
</div>
